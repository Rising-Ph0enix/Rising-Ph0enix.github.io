var ea=function(e){"use strict";var t=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},n=Object.prototype.toString;function r(e){return"[object Array]"===n.call(e)}function a(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===n.call(e)}function i(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var c={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:a,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:s,isStream:function(e){return o(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:i,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,a=arguments.length;r<a;r++)i(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,a=arguments.length;r<a;r++)i(arguments[r],n);return t},extend:function(e,n,r){return i(n,(function(n,a){e[a]=r&&"function"==typeof n?t(n,r):n})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function u(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var l=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(c.isURLSearchParams(t))r=t.toString();else{var a=[];c.forEach(t,(function(e,t){null!=e&&(c.isArray(e)?t+="[]":e=[e],c.forEach(e,(function(e){c.isDate(e)?e=e.toISOString():c.isObject(e)&&(e=JSON.stringify(e)),a.push(u(t)+"="+u(e))})))})),r=a.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function d(){this.handlers=[]}d.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},d.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},d.prototype.forEach=function(e){c.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var p=d,f=function(e,t,n){return c.forEach(n,(function(n){e=n(e,t)})),e},m=function(e){return!(!e||!e.__CANCEL__)},h=function(e,t){c.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},g=function(e,t,n,r,a){return function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,a)},v=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],y=c.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=c.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},w=c.isStandardBrowserEnv()?{write:function(e,t,n,r,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),c.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),c.isString(r)&&s.push("path="+r),c.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},b=function(e){return new Promise((function(t,n){var r=e.data,a=e.headers;c.isFormData(r)&&delete a["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",i=e.auth.password||"";a.Authorization="Basic "+btoa(s+":"+i)}var u,d,p=(u=e.baseURL,d=e.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(d)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,d):d);if(o.open(e.method.toUpperCase(),l(p,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r,a,s,i,u,l="getAllResponseHeaders"in o?(r=o.getAllResponseHeaders(),u={},r?(c.forEach(r.split("\n"),(function(e){if(i=e.indexOf(":"),a=c.trim(e.substr(0,i)).toLowerCase(),s=c.trim(e.substr(i+1)),a){if(u[a]&&v.indexOf(a)>=0)return;u[a]="set-cookie"===a?(u[a]?u[a]:[]).concat([s]):u[a]?u[a]+", "+s:s}})),u):u):null,d={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:l,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(g("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,d),o=null}},o.onabort=function(){o&&(n(g("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(g("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(g(t,e,"ECONNABORTED",o)),o=null},c.isStandardBrowserEnv()){var f=w,m=(e.withCredentials||y(p))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;m&&(a[e.xsrfHeaderName]=m)}if("setRequestHeader"in o&&c.forEach(a,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete a[t]:o.setRequestHeader(t,e)})),c.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),void 0===r&&(r=null),o.send(r)}))},E={"Content-Type":"application/x-www-form-urlencoded"};function S(e,t){!c.isUndefined(e)&&c.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var C,A={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(C=b),C),transformRequest:[function(e,t){return h(t,"Accept"),h(t,"Content-Type"),c.isFormData(e)||c.isArrayBuffer(e)||c.isBuffer(e)||c.isStream(e)||c.isFile(e)||c.isBlob(e)?e:c.isArrayBufferView(e)?e.buffer:c.isURLSearchParams(e)?(S(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):c.isObject(e)?(S(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};A.headers={common:{Accept:"application/json, text/plain, */*"}},c.forEach(["delete","get","head"],(function(e){A.headers[e]={}})),c.forEach(["post","put","patch"],(function(e){A.headers[e]=c.merge(E)}));var _=A;function N(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var x=function(e){return N(e),e.headers=e.headers||{},e.data=f(e.data,e.headers,e.transformRequest),e.headers=c.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),c.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||_.adapter)(e).then((function(t){return N(e),t.data=f(t.data,t.headers,e.transformResponse),t}),(function(t){return m(t)||(N(e),t&&t.response&&(t.response.data=f(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},I=function(e,t){t=t||{};var n={},r=["url","method","params","data"],a=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];c.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),c.forEach(a,(function(r){c.isObject(t[r])?n[r]=c.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:c.isObject(e[r])?n[r]=c.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),c.forEach(o,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=r.concat(a).concat(o),i=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return c.forEach(i,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function T(e){this.defaults=e,this.interceptors={request:new p,response:new p}}T.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=I(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[x,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},T.prototype.getUri=function(e){return e=I(this.defaults,e),l(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},c.forEach(["delete","get","head","options"],(function(e){T.prototype[e]=function(t,n){return this.request(c.merge(n||{},{method:e,url:t}))}})),c.forEach(["post","put","patch"],(function(e){T.prototype[e]=function(t,n,r){return this.request(c.merge(r||{},{method:e,url:t,data:n}))}}));var j=T;function L(e){this.message=e}L.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},L.prototype.__CANCEL__=!0;var R=L;function O(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new R(e),t(n.reason))}))}O.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},O.source=function(){var e;return{token:new O((function(t){e=t})),cancel:e}};var P=O;function q(e){var n=new j(e),r=t(j.prototype.request,n);return c.extend(r,j.prototype,n),c.extend(r,n),r}var k=q(_);k.Axios=j,k.create=function(e){return q(I(k.defaults,e))},k.Cancel=R,k.CancelToken=P,k.isCancel=m,k.all=function(e){return Promise.all(e)},k.spread=function(e){return function(t){return e.apply(null,t)}};var U=k,B=k;U.default=B;var M=U,D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var z=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t,n;t=D,n=function(){var e,t,n=6e4,r=y(n),a="",o=!1;function s(){var t="__lscachetest__";if(void 0!==e)return e;try{if(!localStorage)return!1}catch(e){return!1}try{p(t,"__lscachetest__"),f(t),e=!0}catch(t){e=!(!i(t)||!localStorage.length)}return e}function i(e){return e&&("QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||"QuotaExceededError"===e.name)}function c(){return void 0===t&&(t=null!=window.JSON),t}function u(e){return e+"-cacheexpiration"}function l(){return Math.floor((new Date).getTime()/n)}function d(e){return localStorage.getItem("lscache-"+a+e)}function p(e,t){localStorage.removeItem("lscache-"+a+e),localStorage.setItem("lscache-"+a+e,t)}function f(e){localStorage.removeItem("lscache-"+a+e)}function m(e){for(var t=new RegExp("^lscache-"+a.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")+"(.*)"),n=localStorage.length-1;n>=0;--n){var r=localStorage.key(n);(r=(r=r&&r.match(t))&&r[1])&&r.indexOf("-cacheexpiration")<0&&e(r,u(r))}}function h(e){var t=u(e);f(e),f(t)}function g(e){var t=u(e),n=d(t);if(n){var r=parseInt(n,10);if(l()>=r)return f(e),f(t),!0}}function v(e,t){o&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+e),t&&window.console.warn("lscache - The error was: "+t.message))}function y(e){return Math.floor(864e13/e)}return{set:function(e,t,n){if(!s())return!1;if(!c())return!1;try{t=JSON.stringify(t)}catch(e){return!1}try{p(e,t)}catch(n){if(!i(n))return v("Could not add item with key '"+e+"'",n),!1;var a,o=[];m((function(e,t){var n=d(t);n=n?parseInt(n,10):r,o.push({key:e,size:(d(e)||"").length,expiration:n})})),o.sort((function(e,t){return t.expiration-e.expiration}));for(var g=(t||"").length;o.length&&g>0;)a=o.pop(),v("Cache is full, removing item with key '"+e+"'"),h(a.key),g-=a.size;try{p(e,t)}catch(t){return v("Could not add item with key '"+e+"', perhaps it's too big?",t),!1}}return n?p(u(e),(l()+n).toString(10)):f(u(e)),!0},get:function(e){if(!s())return null;if(g(e))return null;var t=d(e);if(!t||!c())return t;try{return JSON.parse(t)}catch(e){return t}},remove:function(e){s()&&h(e)},supported:function(){return s()},flush:function(){s()&&m((function(e){h(e)}))},flushExpired:function(){s()&&m((function(e){g(e)}))},setBucket:function(e){a=e},resetBucket:function(){a=""},getExpiryMilliseconds:function(){return n},setExpiryMilliseconds:function(e){r=y(n=e)},enableWarnings:function(e){o=e}}},e.exports?e.exports=n():t.lscache=n()})),F="https://js.stripe.com/v3",$=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,H="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",G=null,J=function(e){return null!==G?G:G=new Promise((function(t,n){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(H),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(F,'"]')),t=0;t<e.length;t++){var n=e[t];if($.test(n.src))return n}return null}();r&&e?console.warn(H):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(F).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(e){return void n(e)}else t(null)}))},W=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.10.0",startTime:t})}(r,n),r},X=Promise.resolve().then((function(){return J(null)})),K=!1;X.catch((function(e){K||console.warn(e)}));const V=async e=>{if(e.preventDefault(),document)if(se.member&&se.application){const t=await Q(),{pk:n}=t.fields.secrets,r=e.target.closest("a").href,a=`https://${se.pages.authorizedDomains[0]}/`,o=e.target.closest("a").id.replace("EA_CHECKOUT_","");console.log(n),console.log(r),console.log(a),console.log(o),M.request({url:`http://localhost:3001/v1/memberships/${Y.membershipId}/integrations/stripe/checkout`,method:"post",headers:{"Content-Type":"application/json"},data:{success_url:r,cancel_url:a,productId:o}}).then(async e=>{const t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];K=!0;var r=Date.now();return X.then((function(e){return W(e,t,r)}))}(n),r=await t,a=await r.redirectToCheckout({sessionId:e.data.id});a.error&&console.log(a.error.message)}).catch(e=>{console.log(e)})}else window.location.href=se.pages.postLogoutRedirectUrl},Q=()=>M.request({url:`http://localhost:3001/v1/memberships/${Y.membershipId}/integrations/stripe/keys`,method:"get",headers:{"Content-Type":"application/json"}}).then(e=>{if(e.data&&200===e.status)return e.data.integration[0]}).catch(e=>e.response.data),Y={membershipId:"",initialize:e=>{if(Y.membershipId=e,document){const e=document.querySelector("a[id^=EA_CHECKOUT_]");e&&e.addEventListener("click",V)}}};const Z=(e,t)=>{const{data:n}=t;e.isAuthorized=!0,e.member=Object.assign({},e.member,n.member),e.membershipId=n.member.customerId,e.application=Object.assign({},e.application,n.application),n.application.pages&&(e.pages=n.application.pages),n.application.sources&&(e.sources=n.application.sources),z.set("EA_APPLICATION_"+n.member.customerId,n.application.shortId),z.set("EA_MEMBER_"+n.application.shortId,n.member._id)},ee=async e=>{if(document){const e=document.querySelector("input[data-ea-signup-name='EA_SIGNUP_NAME']"),t=document.querySelector("input[data-ea-signup-email='EA_SIGNUP_EMAIL']"),n=document.querySelector("input[data-ea-signup-password='EA_SIGNUP_PASSWORD']");await se.signup({name:e,email:t,password:n})}},te=async e=>{if(document){const e=document.querySelector("input[data-ea-login-email='EA_LOGIN_EMAIL']"),t=document.querySelector("input[data-ea-login-password='EA_LOGIN_PASSWORD']");await se.login({email:e,password:t})}},ne=()=>{const e=document.createElement("form");return e.onsubmit=async e=>{e.preventDefault();const t=document.getElementById("ea-signup-name").value,n=document.getElementById("ea-signup-email").value,r=document.getElementById("ea-signup-password").value;await se.signup({name:t,email:n,password:r})},e.innerHTML='<div class="ea-form-group">\n<p>Powered by STYM</p>\n<label for="ea-signup-name">Name</label>\n<input type="text" class="ea-form-input is-valid" id="ea-signup-name" placeholder="John Doe">\n<small id="ea-form-name-help" class="ea-form-input-help">We\'ll never share your email with anyone else.</small>\n</div>\n<div class="ea-form-group">\n<label for="ea-signup-email">Email address</label>\n<input type="email" class="ea-form-input is-valid" id="ea-signup-email" placeholder="name@example.com">\n<small id="ea-form-email-help" class="ea-form-input-help">We\'ll never share your email with anyone else.</small>\n</div>\n<div class="ea-form-group">\n<label for="ea-signup-password">Password</label>\n<input type="password" class="ea-form-input is-invalid" id="ea-signup-password" placeholder="Password">\n<small id="ea-form-password-help" class="ea-form-input-help">Password incorrect.</small>\n</div>\n<button type="submit" class="btn btn-primary">Sign Up</button>',e},re=()=>{const e=document.createElement("form");return e.onsubmit=async e=>{e.preventDefault();const t=document.getElementById("ea-login-email").value,n=document.getElementById("ea-login-password").value;await se.login({email:t,password:n})},e.innerHTML='<div class="ea-form-group">\n<label for="ea-signup-email">Email address</label>\n<input type="email" class="ea-form-input is-valid" id="ea-login-email" placeholder="name@example.com">\n<small id="ea-form-email-help" class="ea-form-input-help">We\'ll never share your email with anyone else.</small>\n</div>\n<div class="ea-form-group">\n<label for="ea-signup-password">Password</label>\n<input type="password" class="ea-form-input is-invalid" id="ea-login-password" placeholder="Password">\n<small id="ea-form-password-help" class="ea-form-input-help">Password incorrect.</small>\n</div>\n<button type="submit" class="btn btn-primary">Login</button>',e},ae=e=>{if(!document.getElementById("ea-form-styles")){e.innerHTML='<div class="ea-loader">Loading...</div>',console.log("Loading styles");const t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("link");n.id="ea-form-styles",n.rel="stylesheet",n.type="text/css",n.href="https://dev-cdn.stym.io/ea.js/v1/ea.css?t="+(new Date).getTime(),n.onload=function(){console.log("Successfully loaded form styles"),(e=>{const t=document.createElement("div");t.className="ea-tab-container";const n=document.createElement("img");n.className="ea-form-logo",n.src="http://localhost:3000/assets/logo_256x256.png";const r=document.createElement("img");r.className="ea-form-logo",r.src="./packages/ea/test/powered_by_stripe.svg";const a=document.createElement("ul");a.className="ea-tabs",a.innerHTML='<li class="ea-tab active" data-ea-key="login">Login</li>\n<li class="ea-tab" data-ea-key="signup">Sign Up</li>';const o=document.createElement("div");o.className="ea-tab-content";const s=document.createElement("div");s.className="ea-tab-panel active";const i=document.createElement("div");i.className="ea-tab-panel";const c=re();s.appendChild(c);const u=ne();i.appendChild(u),o.appendChild(s),o.appendChild(i),t.appendChild(n),t.appendChild(a),t.appendChild(r),t.appendChild(o),e.innerHTML="",e.appendChild(t),oe()})(e)},t.appendChild(n)}},oe=()=>{const e={tabsNav:document.querySelector(".ea-tabs"),tabsNavItems:document.querySelectorAll(".ea-tab"),panels:document.querySelectorAll(".ea-tab-panel")},t=t=>e.panels[t],n=t=>{e.panels.forEach(e=>{e.classList.remove("active")}),e.panels[t].classList.add("active")};window.addEventListener("load",()=>{const r=(()=>{let t=0;for(let n=0;n<e.tabsNavItems.length;n++)if(e.tabsNavItems[n].classList.contains("active")){t=n;break}return t})();t(r),n(r)}),e.tabsNav.addEventListener("click",r=>{if(r.target.classList.contains("ea-tab")){const o=r.target,s=Array.from(e.tabsNavItems).indexOf(o);a=o,e.tabsNavItems.forEach(e=>{e.classList.remove("active")}),a.classList.add("active"),t(s),n(s)}var a})},se={isAuthorized:!1,membershipId:"",member:{},sources:{},pages:{},initialize:async e=>(se.membershipId=e,M.get("http://localhost:3001/v1/memberships/"+se.membershipId).then(t=>{if(t.data&&200===t.status){const{data:n}=t;if(se.member=n.member,se.application=n.application,se.sources=n.application.sources,se.pages=n.application.pages,document){const e=document.getElementById("EA_FORM_CONTAINER");e&&ae(e);const t=document.querySelector("form[data-ea-signup-form='EA_SIGNUP_FORM']");t&&t.addEventListener("submit",ee);const n=document.querySelector("form[data-ea-login-form='EA_LOGIN_FORM']");n&&n.addEventListener("submit",te);const r=document.querySelector("[data-ea-logout='EA_LOGOUT']");r&&r.addEventListener("click",se.logout)}return function(e,t,n){let r=!1;return n.every(n=>"/"===e&&e===n||"/"===e&&t&&n.includes(t)||"/"!==e&&n.includes(e)?(r=!0,!1):(r=!1,!0)),r}(window.location.pathname,window.location.hash,se.application.pages.protectedPages)&&se.authorize(),Y.initialize(e),{member:se.member,application:se.application}}return"invalid_request"}).catch(e=>e&&e.response&&e.response.data?e.response.data:e&&e.response?e.response:e)),signup:async(e,t=!1)=>M.request({url:`http://localhost:3001/v1/memberships/${se.membershipId}/members/signup`,method:"post",headers:{"Content-Type":"application/json"},data:e,withCredentials:!0}).then(e=>{if(e.data&&200===e.status){const{data:n}=e;if(Z(se,e),t)return{status:n.status,message:"signed_up",member:n.member,jwt:n.jwt,application:n.application};window.location.href=se.pages.postSignupRedirectUrl}}).catch(e=>{if(e.response&&e.response.data&&409===e.response.status){const{data:t}=e.response;return{status:t.code,message:t.message}}return e.response}),login:async(e,t)=>M.request({url:`http://localhost:3001/v1/memberships/${se.membershipId}/members/login`,method:"post",headers:{"Content-Type":"application/json"},data:e,withCredentials:!0}).then(e=>{if(e.data&&200===e.status){const{data:n}=e;if(Z(se,e),t)return{status:n.status,message:"logged_in",member:n.member,jwt:n.jwt,application:n.application};window.location.href=se.pages.postLoginRedirectUrl}}).catch(e=>{if(e.response&&e.response.data&&409===e.response.status){const{data:t}=e.response;return{status:t.code,message:t.message}}return e.response}),logout:async()=>{const e=z.get("EA_APPLICATION_"+se.membershipId),t=z.get("EA_MEMBER_"+e);return M.request({url:`http://localhost:3001/v1/memberships/${se.membershipId}/members/${t}/logout`,method:"POST",headers:{"Content-Type":"application/json"},data:{},withCredentials:!0}).then(e=>{if(!e.data||200!==e.status)return"logout error";{const{redirect:t}=e.data;delete se.isAuthorized,delete se.member,delete se.pages,delete se.sources,window.location.href=t}}).catch(e=>e)},authorize:async e=>{const t=z.get("EA_APPLICATION_"+se.membershipId),n=z.get("EA_MEMBER_"+t);if(n){const t={url:`http://localhost:3001/v1/memberships/${se.membershipId}/members/${n}/authorize`,method:"post",headers:{"Content-Type":"application/json"},data:null,withCredentials:!0};return e&&(t.headers.Authorization="Bearer "+e),M.request(t).then(e=>{if(e.data&&200===e.status){Z(se,e);const{data:t}=e;return{status:t.status,message:t.message,member:t.member,jwt:t.jwt,application:t.application}}401===e.status&&(window.location.href=se.pages.postLogoutRedirectUrl)}).catch(e=>e.response.data)}window.location.href=se.pages.postLogoutRedirectUrl},recoverPassword:e=>M.request({url:`http://localhost:3001/v1/memberships/${se.membershipId}/auth/recover`,method:"post",headers:{"Content-Type":"application/json"},data:e,withCredentials:!0}).then(e=>{if(e.data&&200===e.status){const{data:t}=e;return t}}).catch(e=>e.response.data),resetPassword:e=>{const{password:t,confirmPassword:n,hash:r}=e;return t!==n?{message:"passwords don't match"}:void 0===r||"undefined"===r?{message:"invalid url"}:M.request({url:`http://localhost:3001/v1/memberships/${se.membershipId}/auth/reset`,method:"post",headers:{"Content-Type":"application/json"},data:e,withCredentials:!0}).then(e=>{if(e.data&&200===e.status){const{data:t}=e;return t}}).catch(e=>e.response.data)}};return e.Auth=se,e.Payments=Y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
